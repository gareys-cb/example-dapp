import{b as y,p as S,u as P,W as h,C as L,a as k,r,j as v,R as I,c as E}from"./vendor.0691e4eb.js";const M=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=e(o);fetch(o.href,s)}};M();window.global=window;window.Buffer=y.Buffer;window.process=S;window.util=P;var A="./assets/logo.3a1fe527.png",W="./assets/logo_connected.c4541ffd.png";const b="YOUR_INFURA_PROJECT_ID",_="Example Dapp",N="https://gareys-cb.github.io/example-dapp/assets/logo.png",R=`https://mainnet.infura.io/v3/${b}`,O=1,D=()=>new L({appName:_,appLogoUrl:N,darkMode:!1,overrideIsMetaMask:!1}).makeWeb3Provider(R,O),U=async()=>{const t=D(),n=new h(t),e=await t.request({method:"eth_requestAccounts"});return{provider:t,web3:n,accounts:e}},F=()=>{var t,n,e;return(e=(n=(t=window.ethereum)==null?void 0:t.providers)==null?void 0:n.find(i=>!!i.isMetaMask))!=null?e:window.ethereum},j=async()=>{const t=F();(!t||!t.isMetaMask||!window.ethereum)&&window.open("https://metamask.io/download.html","_blank");const n=new h(t),e=await t.request({method:"eth_requestAccounts"});return{provider:t,web3:n,accounts:e}},q=()=>new k({infuraId:b}),B=async()=>new Promise(async(t,n)=>{const e=q(),i=new h(e);let o=!0;const s=()=>o,a=()=>{s()&&n()};e.connector.on("disconnect",a);try{const d=await e.enable();o=!1,t({provider:e,web3:i,accounts:d})}catch{n()}}),T=async t=>K[t](),K={coinbase:U,metamask:j,walletconnect:B},m="web3-provider",G=()=>{const[t,n]=r.exports.useState(),[e,i]=r.exports.useState(),[o,s]=r.exports.useState(),[a,d]=r.exports.useState(window.localStorage.getItem(m)),u=r.exports.useCallback(()=>{localStorage.removeItem(m),d(void 0),i(void 0),n(void 0),s(void 0)},[e]),g=r.exports.useCallback(async c=>{try{const{provider:p,web3:x,accounts:C}=await T(c);localStorage.setItem(m,c),d(c),i(p),n(x),s(C[0])}catch{console.warn("FAILED TO SIGN IN!"),u()}},[u]);return r.exports.useEffect(()=>{const c=p=>{if(!p.length){u();return}s(p[0])};return e==null||e.on("accountsChanged",c),()=>{e==null||e.removeListener("accountsChanged",c)}},[e,u]),r.exports.useEffect(()=>{const c=()=>{u()};return e==null||e.on("disconnect",c),()=>{e==null||e.removeListener("disconnect",c)}},[e,u]),r.exports.useEffect(()=>{const c=()=>{localStorage.getItem("-walletlink:https://www.walletlink.org:version")||localStorage.removeItem(m)};if(a!=="coinbase"){removeEventListener("beforeunload",c);return}return addEventListener("beforeunload",c),()=>{removeEventListener("beforeunload",c)}},[a]),r.exports.useEffect(function(){const p=window.localStorage.getItem(m);d(p),p&&g(p).catch(u)},[]),{providerString:a,connectProvider:g,changeProvider:u,account:o,web3:t}},l=v.exports.jsx,f=v.exports.jsxs,w=r.exports.memo(({providerString:t,handleConnect:n,text:e})=>l("button",{type:"button",onClick:()=>n(t),children:e})),J=r.exports.memo(({handleConnect:t})=>f("div",{className:"content",children:[l("p",{children:"Connect your wallet"}),l(w,{providerString:"coinbase",handleConnect:t,text:"Coinbase Wallet"}),l(w,{providerString:"metamask",handleConnect:t,text:"MetaMask"}),l(w,{providerString:"walletconnect",handleConnect:t,text:"WalletConnect"})]})),Y=r.exports.memo(({account:t,web3:n,providerString:e,handleChangeProvider:i})=>f("div",{className:"content",children:[f("small",{children:["Selected account: ",t]}),l("button",{type:"button",onClick:()=>$({web3:n,account:t}),children:"Sign Message"}),l("button",{className:"change-provider",type:"button",onClick:i,children:"Change Provider"}),f("small",{children:["Connected via ",e]})]})),$=async({web3:t,account:n})=>{try{const e=await t.eth.personal.sign("Example message",n,"");console.info(e)}catch(e){console.warn(e)}};function H(){const{connectProvider:t,changeProvider:n,providerString:e,account:i,web3:o}=G(),[s,a]=r.exports.useState(!!e),d=!!i&&!!o;r.exports.useEffect(()=>{d&&s&&a(!1)},[d,s]);const u=r.exports.useCallback(async c=>{a(!0),await t(c).finally(()=>{a(!1)})},[t]),g=r.exports.useCallback(()=>{a(!0),n(),a(!1)},[n]);return f("div",{className:"App",children:[l("h1",{children:"Example Dapp"}),l("img",{src:d?W:A,className:"App-logo",alt:"logo"}),s?l("p",{children:"loading..."}):f("div",{children:[!d&&l(J,{handleConnect:u}),d&&l(Y,{web3:o,account:i,providerString:e,handleChangeProvider:g})]})]})}I.render(l(E.StrictMode,{children:l(H,{})}),document.getElementById("root"));
